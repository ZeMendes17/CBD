CREATE KEYSPACE IF NOT EXISTS bank_system WITH replication = {'class': 'SimpleStrategy', 'replication_factor': '3'}

CREATE TABLE IF NOT EXISTS bank_system.client (
    id int,
    name text,
    address text,
    phone text,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS bank_system.account (
    id int,
    client_id int,
    balance decimal,
    acc_number text,
    transactions_list list<int>,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS bank_system.transaction (
    id int,
    acc_id int,
    amount decimal,
    date timestamp,
    transaction_type text,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS bank_system.loans (
    id int,
    acc_id int,
    amount decimal,
    interest_rate decimal,
    duration int,
    date timestamp,
    PRIMARY KEY (id)
);

CREATE TABLE IF NOT EXISTS bank_system.manager (
    id int,
    name text,
    address text,
    phone text,
    managed_accounts set<int>,
    performance map<text, decimal>,
    PRIMARY KEY (id)
);

CREATE INDEX ON bank_system.account (client_id);
CREATE INDEX ON bank_system.transaction (acc_id);
CREATE INDEX ON bank_system.loans (acc_id);